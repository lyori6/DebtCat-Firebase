<!DOCTYPE html><!--  Last Published: Thu Feb 06 2025 20:19:31 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="66e660fde8895901139f66e3" data-wf-site="66567a3f3727972f31237c21">
<head>
  <meta charset="utf-8">
  <title>mail-review</title>
  <meta content="mail-review" property="og:title">
  <meta content="mail-review" property="twitter:title">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="6e09m7Tfl6u4e-eTXMXpwCbUlW_YC8oVpyv0EL-XU9k" name="google-site-verification">
  <meta content="noindex" name="robots">
  <link href="css/normalize.css" rel="stylesheet" type="text/css">
  <link href="css/webflow.css" rel="stylesheet" type="text/css">
  <link href="css/debtcat.webflow.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
  <script type="text/javascript">WebFont.load({  google: {    families: ["Montserrat:100,100italic,200,200italic,300,300italic,400,400italic,500,500italic,600,600italic,700,700italic,800,800italic,900,900italic","Merriweather:300,300italic,400,400italic,700,700italic,900,900italic","Roboto:100,300,regular,500,700,900"]  }});</script>
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  <link href="images/favicon.png" rel="shortcut icon" type="image/x-icon">
  <link href="images/webclip.png" rel="apple-touch-icon">
  <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-DMRMQNLTBZ"></script>
  <script type="text/javascript">window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('set', 'developer_id.dZGVlNj', true);gtag('config', 'G-DMRMQNLTBZ');</script><!--  Google tag (gtag.js) ** MOVED to site settings/integrations"
<script async src="https://www.googletagmanager.com/gtag/js?id=G-DMRMQNLTBZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-DMRMQNLTBZ');
</script>   -->
  <!--   MS Clarity   -->
  <script type="text/javascript">
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "oc17kv2js6");
</script>
  <script>
  // Define the getIP function before loading the ipify script
  function getIP(json) {
    userIP = json.ip;
  }
  // Initialize the userIP variable
  let userIP = '';
</script>
  <script src="https://api.ipify.org?format=jsonp&callback=getIP"></script>
  <link rel="stylesheet" href="https://unpkg.com/@geoapify/geocoder-autocomplete@^1/styles/minimal.css">
  <link href="/css/footer.css" rel="stylesheet" type="text/css">
</head>
<body class="body">
  <div class="w-layout-blockcontainer container-body w-container">
    <div class="navbar">
      <div data-animation="default" data-collapse="medium" data-duration="400" data-easing="ease" data-easing2="ease" role="banner" class="navbar-no-shadow-container w-nav">
        <div class="container-regular">
          <div class="navbar-wrapper">
            <a href="index.html" class="navbar-brand w-nav-brand"><img src="images/debtcat-logo-inverse.svg" loading="lazy" width="70" height="Auto" alt="DebtCat logo" class="logo-header"></a>
            <nav role="navigation" class="nav-menu-wrapper w-nav-menu">
              <ul role="list" class="nav-menu w-list-unstyled">
                <li class="list-item">
                  <a href="start-dispute.html" class="nav-link h4-montserrat-navbar">Dispute</a>
                </li>
                <li class="list-item">
                  <a href="chat.html" class="nav-link h4-montserrat-navbar">Chat</a>
                </li>
                <li class="list-item">
                  <a href="articles.html" class="nav-link h4-montserrat-navbar">Guides</a>
                </li>
                <li class="list-item">
                  <a href="s/about.html" class="nav-link h4-montserrat-navbar">About Us</a>
                </li>
              </ul>
            </nav>
            <address class="menu-button w-nav-button">
              <div class="icon w-icon-nav-menu"></div>
            </address>
          </div>
        </div>
      </div>
    </div>
    <div class="w-layout-blockcontainer content-container w-container">
      <div class="w-embed w-script">
        <!DOCTYPE html>
        <html lang="en">
        <head>
          <meta charset="UTF-8">
          <meta name="viewport" content="width=device-width, initial-scale=1.0">
          <title>Review and Payment</title>
          <style>
   <style>
    /* Import Google Fonts */
    @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto:wght@400;500;700&display=swap');
    /* Global Styles */
    body {
        display: flex;
        justify-content: center;
        align-items: flex-start;
        min-height: 100vh;
        background-color: #f0f0f0;
        font-family: 'Roboto', Arial, sans-serif;
        margin: 40px auto;
        padding: 0;
    }
    .container {
        background-color: #ffffff;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        width: 90%;
        max-width: 1500px;
        box-sizing: border-box;
        margin: 40px auto;
        display: flex;
        flex-direction: column;
        align-items: center;
    }
    /* Headings */
    h2 {
        font-family: 'Montserrat', sans-serif;
        color: #1A1A1E;
        font-size: 1.6em;
        margin-bottom: 20px;
        text-align: center;
        width: 100%;
    }
    h3 {
        font-family: 'Roboto', sans-serif;
        font-weight: 600;
        font-size: 1.4em;
        font-size: 20px;
        margin-bottom: 16px;
    }
    /* Info Cards */
    .info-card {
        margin: 0 auto 16px auto;
        padding: 20px;
        border-radius: 8px;
        background-color: #f9f9f9;
        width: 90%;
        max-width: 700px;
        box-sizing: border-box;
    }
    .section-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        width: 100%;
        margin-bottom: 20px;
    }
    .section-header h3 {
        margin: 0;
        font-size: 1.2em;
    }
    /* Edit Buttons */
    .edit-button {
        background-color: #fff;
        border: 3px solid #1A1A1E;
        border-right-width: 5px;
        border-bottom-width: 5px;
        color: #1A1A1E;
        font-family: 'Roboto', sans-serif;
        font-size: 14px;
        font-weight: 700;
        padding: 8px 20px;
        cursor: pointer;
        transition: background-color 0.3s, color 0.3s;
        border-radius: 8px;
    }
    .edit-button.save-mode {
        background-color: #CBF84C;
        color: #1A1A1E;
        border-color: #000;
    }
    .edit-button:active {
      box-shadow: none; /* Removes the shadow on click */
    }
    .edit-button:hover {
        background-color: #CBF84C;
        color: #1A1A1E;
    }
    /* Responsive Edit Button */
    @media (max-width: 600px) {
        .section-header {
            flex-direction: column;
            align-items: flex-start;
        }
        .edit-button {
            margin-top: 10px;
            width: 100%;
            padding: 10px 20px;
        }
    }
    /* Form Fields */
    .field-group {
        margin-bottom: 15px;
    }
    .review-label {
        font-family: 'Roboto', sans-serif;
        font-weight: 600;
        font-size: 16px;
        margin-bottom: 5px;
        display: block;
    }
    .review-value {
        font-family: 'Roboto', sans-serif;
        font-weight: 400;
        font-size: 16px;
        margin-bottom: 20px;
        display: block;
        word-wrap: break-word;
        white-space: normal;
    }
    .review-input, .review-select {
        width: 100%;
        padding: 8px;
        margin-bottom: 15px;
        border: 1px solid #ccc;
        border-radius: 4px;
        font-size: 16px;
        box-sizing: border-box;
    }
    .non-editable {
        display: block;
    }
    /* Button Wrapper */
    .button-wrapper {
        margin-top: 30px;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 20px;
        width: 100%;
    }
    /* Common Button Styles */
    #confirmSubmit, #backButton {
        width: 100%;
        max-width: 300px;
        padding: 12px 24px;
        box-sizing: border-box;
        font-family: 'Roboto', sans-serif;
        font-size: 16px;
        font-weight: 700;
        border-radius: 8px;
        cursor: pointer;
        transition: background-color 0.3s, box-shadow 0.3s;
    }
    /* Confirm Submit Button */
    #confirmSubmit {
        background-color: #CBF84C; 
        border: 3px solid #000;
        border-right-width: 5px;
        border-bottom-width: 5px;
        color: #000;
        box-shadow: 3px 3px 0px 0px #000;
    }
    #confirmSubmit:hover {
        background-color: #b3e53a; /* Slightly darker green on hover */
        box-shadow: 2px 2px 0px 0px #000;
    }
      #confirmSubmit:active {
            box-shadow: none; 
        }
    #confirmSubmit:disabled {
        background-color: #e0e0e0;
        border: 3px solid #ccc;
        color: #999;
        cursor: not-allowed;
    }
    /* Back Button */
    #backButton {
        background-color: #fff;
        border: 3px solid #000;
        border-right-width: 5px;
        border-bottom-width: 5px;
        color: #000;
        box-shadow: 3px 3px 0px 0px #000;
    }
    #backButton:hover {
        background-color: #f0f0f0; /* Light gray on hover */
    }
        #backButton:active {
            box-shadow: none; 
        }
    /* Start Over Button */
    #startOverButton {
        width: 100%;
        max-width: 300px;
        padding: 12px 24px;
        background-color: transparent;
        border: none;
        color: black;
        cursor: pointer;
        font-family: 'Roboto', sans-serif;
        font-size: 16px;
        font-weight: 700;
        border-radius: 8px;
        transition: background-color 0.3s, color 0.3s;
    }
    #startOverButton:hover {
        background-color: #F45D5D; /* Corrected color code */
        color: #fff;
    }
    /* Spinner */
    .spinner {
        width: 56px;
        height: 56px;
        border-radius: 50%;
        background: radial-gradient(farthest-side, #3358ef 94%, #0000) top/9px 9px no-repeat,
                    conic-gradient(#0000 30%, #3358ef);
        -webkit-mask: radial-gradient(farthest-side, #0000 calc(100% - 9px), #000 0);
        animation: spinner-rotate 1s infinite linear;
        margin: 0 auto;
        display: none;
    }
    @keyframes spinner-rotate {
        100% {
            transform: rotate(360deg);
        }
    }
    /* Error Messages */
    #emailError, #balanceError {
        color: red;
        display: none;
        font-size: 14px;
        margin-top: 5px;
    }
    /* Hidden Elements */
    .hidden {
        display: none;
    }
    /* Responsive Styles */
    @media (max-width: 800px) {
        #confirmSubmit, #backButton, #startOverButton {
            max-width: 90%;
        }
    }
    @media (max-width: 600px) {
        .container {
            width: 95%;
        }
        .info-card {
            width: 100%;
            max-width: none;
        }
        #confirmSubmit, #backButton, #startOverButton {
            max-width: 100%;
            padding: 10px 20px;
        }
    }
    /* Balance Input Container */
    .balance-input-container {
        position: relative;
        width: 100%;
    }
    .balance-input-container .dollar-sign {
        position: absolute;
        left: 10px;
        top: 50%;
        transform: translateY(-50%);
        font-size: 16px;
        font-weight: bold;
        color: #000;
        pointer-events: none;
        display: none;
    }
    .balance-input-container .review-input {
        padding-left: 25px;
        box-sizing: border-box;
    }
    /* Additional Styles */
    .balance-container {
        display: flex;
        align-items: center;
        margin-bottom: 8px;
    }
    .balance-container span {
        font-size: 16px;
        padding-right: 8px;
        font-weight: bold;
    }
    .balance-container input {
        flex: 1;
        padding-left: 8px;
    }
    .balance-container .review-value {
        font-size: 16px;
        font-weight: bold;
    }
    .save-mode {
        background-color: #CBF84C;
        border: 2px solid #000;
    }
.disclaimer {
    text-align: center;
    font-size: 1em; 
    margin: 8px 0;   
    color: #555;      
}
.disclaimer a {
    text-decoration: underline;
    font-family: 'Roboto', sans-serif;
    font-size: 1em; /* Same size as the rest of the disclaimer text */
    color: #555; /* Adjust the color to match the rest of the typography */
}
</style>
          <script src="https://js.stripe.com/v3/"></script>
        </head>
        <body>
          <div class="container">
            <h2>Review Your Dispute</h2>
            <div class="info-card" id="myInfoSection">
              <div class="section-header">
                <h3>My Information</h3>
                <button class="edit-button" id="editMyInfoButton">Edit</button>
              </div>
              <div class="field-group">
                <label class="review-label">Name</label>
                <span id="myInfoNameDisplay" class="review-value"></span>
                <input type="text" id="myInfoNameInput" class="review-input" style="display: none;">
              </div>
              <div class="field-group">
                <label class="review-label">Email</label>
                <span id="myInfoEmailDisplay" class="review-value"></span>
                <input type="email" id="myInfoEmailInput" class="review-input" style="display: none;">
                <span id="emailError">Please enter a valid email address.</span>
              </div>
              <div class="field-group">
                <label class="review-label">Mailing Address</label>
                <span id="myInfoAddressDisplay" class="review-value non-editable"></span>
              </div>
            </div>
            <div class="info-card" id="accountInfoSection">
              <div class="section-header">
                <h3>Account Information</h3>
                <button class="edit-button" id="editAccountInfoButton">Edit</button>
              </div>
              <div class="field-group">
                <label class="review-label">Debt Balance</label>
                <!--  Balance Display  -->
                <span id="balanceDisplay" class="review-value">$0.00</span>
                <div class="balance-input-container">
                  <span class="dollar-sign">$</span>
                  <input type="text" id="balanceInput" class="review-input" style="display: none;">
                </div>
                <span id="balanceError" style="display: none; color: red;">Enter Balance (e.g., 12.34).</span>
              </div>
              <div class="field-group">
                <label class="review-label">Dispute Reason</label>
                <span id="disputeReasonDisplay" class="review-value"></span>
                <select id="disputeReasonInput" class="review-select" style="display: none;">
                  <option value="I want to validate this debt." selected="">I want to validate this debt.</option>
                  <option value="I don't recognize this debt.">I don't recognize this debt.</option>
                  <option value="This debt is not mine.">This debt is not mine.</option>
                  <option value="This debt has already been paid.">This debt has already been paid.</option>
                  <option value="The amount of the debt is incorrect.">The amount of the debt is incorrect.</option>
                </select>
              </div>
              <div class="field-group" id="noteFieldGroup">
                <label class="review-label">Dispute Note</label>
                <span id="disputeNoteDisplay" class="review-value"></span>
                <input type="text" id="disputeNoteInput" class="review-input" style="display: none;">
              </div>
              <div class="field-group">
                <label class="review-label">Collector Name</label>
                <span id="collectorNameDisplay" class="review-value"></span>
                <input type="text" id="collectorNameInput" class="review-input" style="display: none;">
              </div>
              <div class="field-group">
                <label class="review-label">Account Number</label>
                <span id="accountNumberDisplay" class="review-value"></span>
                <input type="text" id="accountNumberInput" class="review-input" style="display: none;">
              </div>
              <div class="field-group">
                <label class="review-label">Collector Address</label>
                <span id="collectorAddressDisplay" class="review-value non-editable"></span>
              </div>
            </div>
            <div class="disclaimer">
              Your dispute letter will be printed and mailed within two business days.<br> Delivery times are determined by USPS. See our <a href="s/refund.html" target="_blank">refund policy</a>
            </div>
            <div class="button-wrapper">
              <button id="confirmSubmit">Confirm and Pay $3.99</button> <!--  This will be dynamically updated  -->
              <button id="backButton">Back</button>
              <button id="startOverButton" class="start-over-btn">Start Over</button>
            </div>
            <div id="confirmSubmitSpinner" class="spinner"></div>
            <div id="errorMessage" style="color: red; display: none; margin-top: 10px; text-align: center;"></div>
          </div>
          <script>
        document.addEventListener("DOMContentLoaded", function() {
            // Initialize Stripe with your publishable key
            const stripe = Stripe('pk_live_51PUHRJBcUICL2kM7RIBtle0vuYBrBuaLLTTqmPaLA3TLVL2937Ao3Ko9isfvmgXzGzjVbeKvVqq2eiSGLdNj7Ufu00q8HFeS6Z');
            // Retrieve stored data from localStorage
            let storedData = JSON.parse(localStorage.getItem('submittedData') || '{}');
            let isEditingMyInfo = false;
            let isEditingAccountInfo = false;
            // Function to validate email
            function isValidEmail(email) {
                const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                return re.test(email);
            }
            // Function to validate balance input
            function validateBalance(balance) {
                const re = /^\d+(\.\d{2})?$/;  // Only numbers and up to two decimals allowed
                return re.test(balance);
            }
            // Function to format balance for display (with $, commas, and two decimals)
            function formatBalance(balance) {
                if (!balance || isNaN(balance)) return '';
                return `$${parseFloat(balance).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;
            }
            // Function to format balance for editing (removes non-numeric characters)
            function formatBalanceForEdit(balance) {
                if (!balance) return '';
                return String(balance).replace(/[^0-9.-]+/g, '');
            }
            // Toggle between Edit and Save modes
            function toggleEditSave(sectionElement, isEditing, editButton) {
                // Exclude spans with the 'non-editable' class
                const spans = sectionElement.querySelectorAll('.review-value:not(.non-editable)');
                const inputs = sectionElement.querySelectorAll('.review-input, .review-select');
                const confirmSubmitButton = document.getElementById('confirmSubmit');
                // Find the dollar sign within the balance-input-container
                const dollarSign = sectionElement.querySelector('.balance-input-container .dollar-sign');
                if (isEditing) {
                    spans.forEach(span => span.style.display = 'none');
                    inputs.forEach(input => input.style.display = 'block');
                    // Show the dollar sign in edit mode
                    if (dollarSign) {
                        dollarSign.style.display = 'block';
                    }
                    editButton.textContent = 'Save';
                    editButton.classList.add('save-mode');
                    confirmSubmitButton.disabled = true;
                } else {
                    spans.forEach(span => span.style.display = 'block');
                    inputs.forEach(input => input.style.display = 'none');
                    // Hide the dollar sign when not in edit mode
                    if (dollarSign) {
                        dollarSign.style.display = 'none';
                    }
                    editButton.textContent = 'Edit';
                    editButton.classList.remove('save-mode');
                    confirmSubmitButton.disabled = false;
                }
            }
            // Populate fields on page load
            function populateFields() {
                document.getElementById('myInfoNameDisplay').innerText = `${storedData.firstName || ''} ${storedData.lastName || ''}`.trim();
                document.getElementById('myInfoEmailDisplay').innerText = storedData.email || '';
                document.getElementById('myInfoAddressDisplay').innerText = 
                    `${storedData.address || ''}, ${storedData.city || ''}, ${storedData.state || ''} ${storedData.zip || ''}`;
                // Update balance
                document.getElementById('balanceDisplay').innerText = formatBalance(storedData.balance || ''); // Non-editable display
                document.getElementById('balanceInput').value = storedData.balance ? parseFloat(storedData.balance).toFixed(2) : ''; // Ensure balance has two decimals in edit mode
                // Continue with other fields...
                document.getElementById('disputeReasonDisplay').innerText = storedData.reasonForDispute || '';
                document.getElementById('disputeNoteDisplay').innerText = storedData.disputeNote || '';
                document.getElementById('collectorNameDisplay').innerText = storedData.collectorName || '';
                document.getElementById('accountNumberDisplay').innerText = storedData.accountNumber || '';
                // Handle collector address with optional address2
                let collectorAddressFull = `${storedData.collectorAddress || ''}`;
                if (storedData.collectorAddress2) {
                    collectorAddressFull += `, ${storedData.collectorAddress2}`;
                }
                collectorAddressFull += `, ${storedData.collectorCity || ''}, ${storedData.collectorState || ''} ${storedData.collectorZip || ''}`;
                document.getElementById('collectorAddressDisplay').innerText = collectorAddressFull;
                if (!storedData.disputeNote || storedData.disputeNote.trim() === '') {
                    document.getElementById('noteFieldGroup').classList.add('hidden');
                } else {
                    document.getElementById('noteFieldGroup').classList.remove('hidden');
                }
                const confirmButton = document.getElementById('confirmSubmit');
                if (storedData.letterType === 'certified') {
                    confirmButton.textContent = 'Confirm and Pay $9.99';
                } else {
                    // Default to first_class if not certified
                    confirmButton.textContent = 'Confirm and Pay $3.99';
                    storedData.letterType = 'first_class'; // Ensure it's set to first_class
                    localStorage.setItem('submittedData', JSON.stringify(storedData));
                }
            }
            // Handle 'Edit/Save' for My Information
            document.getElementById('editMyInfoButton').addEventListener('click', function() {
                const sectionElement = this.parentElement.parentElement;
                isEditingMyInfo = !isEditingMyInfo;
                toggleEditSave(sectionElement, isEditingMyInfo, this);
                const emailError = document.getElementById('emailError');
                if (!isEditingMyInfo) {
                    const nameValue = document.getElementById('myInfoNameInput').value.trim();
                    const emailValue = document.getElementById('myInfoEmailInput').value.trim();
                    const nameParts = nameValue.split(' ');
                    storedData.firstName = nameParts[0] || '';
                    storedData.lastName = nameParts.slice(1).join(' ') || '';
                    if (!isValidEmail(emailValue)) {
                        emailError.style.display = 'block';
                        isEditingMyInfo = true;
                        toggleEditSave(sectionElement, isEditingMyInfo, this);
                        return;
                    } else {
                        emailError.style.display = 'none';
                    }
                    storedData.email = emailValue;
                    localStorage.setItem('submittedData', JSON.stringify(storedData));
                    document.getElementById('myInfoNameDisplay').innerText = nameValue;
                    document.getElementById('myInfoEmailDisplay').innerText = storedData.email;
                } else {
                    document.getElementById('myInfoNameInput').value = document.getElementById('myInfoNameDisplay').innerText;
                    document.getElementById('myInfoEmailInput').value = document.getElementById('myInfoEmailDisplay').innerText;
                    emailError.style.display = 'none';
                }
            });
            // Handle 'Edit/Save' for Account Information
            document.getElementById('editAccountInfoButton').addEventListener('click', function() {
                const sectionElement = this.parentElement.parentElement;
                isEditingAccountInfo = !isEditingAccountInfo;
                toggleEditSave(sectionElement, isEditingAccountInfo, this);
                const balanceError = document.getElementById('balanceError');
                if (!isEditingAccountInfo) {
                    const balanceValue = document.getElementById('balanceInput').value.trim();
                    if (!validateBalance(balanceValue)) {
                        balanceError.style.display = 'block';
                        isEditingAccountInfo = true;
                        toggleEditSave(sectionElement, isEditingAccountInfo, this);
                        return;
                    } else {
                        balanceError.style.display = 'none';
                    }
                    storedData.balance = parseFloat(balanceValue);
                    storedData.reasonForDispute = document.getElementById('disputeReasonInput').value;
                    storedData.disputeNote = document.getElementById('disputeNoteInput').value.trim();
                    storedData.collectorName = document.getElementById('collectorNameInput').value.trim();
                    storedData.accountNumber = document.getElementById('accountNumberInput').value.trim();
                    localStorage.setItem('submittedData', JSON.stringify(storedData));
                    document.getElementById('balanceDisplay').innerText = formatBalance(storedData.balance);
                    document.getElementById('disputeReasonDisplay').innerText = storedData.reasonForDispute;
                    document.getElementById('disputeNoteDisplay').innerText = storedData.disputeNote;
                    document.getElementById('collectorNameDisplay').innerText = storedData.collectorName;
                    document.getElementById('accountNumberDisplay').innerText = storedData.accountNumber;
                    if (!storedData.disputeNote || storedData.disputeNote.trim() === '') {
                        document.getElementById('noteFieldGroup').classList.add('hidden');
                    } else {
                        document.getElementById('noteFieldGroup').classList.remove('hidden');
                    }
                } else {
                    document.getElementById('balanceInput').value = formatBalanceForEdit(document.getElementById('balanceDisplay').innerText);
                    document.getElementById('disputeReasonInput').value = document.getElementById('disputeReasonDisplay').innerText;
                    document.getElementById('disputeNoteInput').value = document.getElementById('disputeNoteDisplay').innerText;
                    document.getElementById('collectorNameInput').value = document.getElementById('collectorNameDisplay').innerText;
                    document.getElementById('accountNumberInput').value = document.getElementById('accountNumberDisplay').innerText;
                    balanceError.style.display = 'none';
                }
            });
            document.getElementById('backButton').addEventListener('click', function() {
                window.location.href = '/collector-info.html'; 
            });
            // Handle 'Start Over' button click
            document.getElementById('startOverButton').addEventListener('click', function() {
                window.location.href = '/dispute-form.html';
            });
            // Handle 'Confirm and Pay' button click
            document.getElementById('confirmSubmit').addEventListener('click', async function() {
                // Prevent action if currently editing
                if (isEditingMyInfo || isEditingAccountInfo) {
                    return;
                }
                // Disable the button to prevent multiple clicks
                this.disabled = true;
                this.style.display = 'none';
                document.getElementById('startOverButton').style.display = 'none';
                document.getElementById('backButton').style.display = 'none';
                document.getElementById('confirmSubmitSpinner').style.display = 'block';
                document.getElementById('errorMessage').style.display = 'none';
                try {
                    // Dynamically set the Stripe worker URL based on the letterType
                    const workerURL = 'https://stripepmnt.debtcatai.workers.dev/'; // New Stripe Worker URL
                    // Prepare the payload with letterType
                    const payload = {
                        letterType: storedData.letterType || 'first_class' // Default to 'first_class' if not set
                    };
                    const response = await fetch(workerURL, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(payload)
                    });
                    if (!response.ok) {
                        const errorText = await response.text();
                        throw new Error(`Stripe Worker Error: ${errorText}`);
                    }
                    const session = await response.json();
                    if (!session || session.error || !session.id) {
                        throw new Error(session.error || 'Failed to create Stripe session');
                    }
                    // Redirect to Stripe Checkout
                    const result = await stripe.redirectToCheckout({
                        sessionId: session.id
                    });
                    if (result.error) {
                        throw new Error(result.error.message);
                    }
                } catch (error) {
                    // Display error message to the user
                    document.getElementById('errorMessage').textContent = error.message;
                    document.getElementById('errorMessage').style.display = 'block';
                } finally {
                    // Re-enable the buttons and hide the spinner
                    this.disabled = false;
                    this.style.display = 'block';
                    document.getElementById('startOverButton').style.display = 'block';
                    document.getElementById('backButton').style.display = 'block';
                    document.getElementById('confirmSubmitSpinner').style.display = 'none';
                }
            });
            // Function to initialize the page with stored data
            function initializePage() {
                populateFields();
            }
            // Initialize the page on load
            initializePage();
        });
    </script>
     <script>
      // Add scroll event listener for header background color
      window.addEventListener('scroll', function() {
      navbar = document.querySelector('.navbar');
      if (window.scrollY > 0) {
      navbar.style.backgroundColor = '#3358EF';
      navbar.style.transition = 'background-color 0.3s ease';
      } else {
      navbar.style.backgroundColor = 'transparent';
      }
      });
      </script>
        </body>
        </html>
      </div>
    </div>
    <!-- Footer -->
<!-- Footer -->
<!-- Footer -->
<!-- Footer -->
<!-- Footer -->
<!-- Footer -->
<!-- Footer -->
<footer class="footer">
  <div class="footer-container">
    <div class="footer-nav">
      <div class="footer-links">
        <a href="/start-dispute.html" class="footer-link">Dispute</a>
        <a href="/articles.html" class="footer-link">Guides</a>
        <a href="/chat.html" class="footer-link">Debt Chat</a>
        <a href="/s/about.html" class="footer-link">About Us</a>
        <a href="/s/fdcpa-checklist.html" class="footer-link">FDCPA Checklist</a>
      </div>
      <div class="footer-social">
        <a href="https://www.instagram.com/debtcat/" class="footer-social-link">
          <img src="/images/social/Platform=Instagram, Color=Negative.svg" alt="Instagram" width="24" height="24">
        </a>
        <a href="https://www.threads.net/@debtcat" class="footer-social-link">
          <img src="/images/social/Platform=Threads, Color=Negative.svg" alt="Threads" width="24" height="24">
        </a>
        <a href="https://x.com/DebtCatAI" class="footer-social-link">
          <img src="/images/social/Platform=X (Twitter), Color=Negative.svg" alt="X (Twitter)" width="24" height="24">
        </a>
        <a href="https://www.facebook.com/profile.php?id=61564070911067" class="footer-social-link">
          <img src="/images/social/Platform=Facebook, Color=Negative.svg" alt="Facebook" width="24" height="24">
        </a>
        <a href="https://www.tiktok.com/@debtcat" class="footer-social-link">
          <img src="/images/social/Platform=TikTok, Color=Negative.svg" alt="TikTok" width="24" height="24">
        </a>
        <a href="https://www.youtube.com/@DebtCat" class="footer-social-link">
          <img src="/images/social/Platform=YouTube, Color=Negative.svg" alt="YouTube" width="24" height="24">
        </a>
      </div>
    </div>
    <div class="footer-divider"></div>
    <div class="footer-bottom">
      <div class="footer-copyright">© 2025 DebtCat. All rights reserved | Developed and authored with AI assistance ✨</div>
      <div class="footer-legal">
        <a href="/s/tos.html" target="_blank" class="footer-legal-link">Terms Of Service</a>
        <a href="/s/refund.html" target="_blank" class="footer-legal-link">Refund Policy</a>
        <a href="/s/privacy-policy.html" target="_blank" class="footer-legal-link">Privacy Policy</a>
      </div>
    </div>
  </div>
</footer>






  </div>
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=66567a3f3727972f31237c21" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="js/webflow.js" type="text/javascript"></script>
</body>
</html>